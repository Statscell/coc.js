{"version":3,"file":"events.js","sourceRoot":"","sources":["../../src/utils/events.ts"],"names":[],"mappings":"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","sourcesContent":["import { Tracker } from '../lib/Tracker';\nimport { Player, Clan } from '../lib/Client';\n\nexport function handlePlayerChanges(client: Tracker, oldData: Player, newData: Player) {\n\t// General player data update realted event\n\tif (client.events.includes('PLAYER_UPDATE')) {\n\t\tconst keys = [];\n\t\tconst previous: dynamicObj = {};\n\t\tconst current: dynamicObj = {};\n\n\t\tif (oldData.name !== newData.name) {\n\t\t\tkeys.push('name');\n\t\t\tprevious.name = oldData.name;\n\t\t\tcurrent.name = newData.name;\n\t\t}\n\t\tif ((oldData.clan && !newData.clan) || (!oldData.clan && newData.clan) || (oldData.clan?.tag !== newData.clan?.tag)) {\n\t\t\tkeys.push('clan');\n\t\t\tprevious.clan = oldData.clan || null;\n\t\t\tcurrent.clan = newData.clan || null;\n\t\t}\n\t\tif (oldData.townHallLevel !== newData.townHallLevel) {\n\t\t\tkeys.push('townhallLevel');\n\t\t\tprevious.townHallLevel = oldData.townHallLevel;\n\t\t\tcurrent.townHallLevel = newData.townHallLevel;\n\t\t}\n\t\tif ((oldData.townHallWeaponLevel || newData.townHallWeaponLevel) && (oldData.townHallWeaponLevel !== newData.townHallWeaponLevel)) {\n\t\t\tkeys.push('townHallWeaponLevel');\n\t\t\tprevious.townHallWeaponLevel = oldData.townHallWeaponLevel || null;\n\t\t\tcurrent.townHallWeaponLevel = oldData.townHallWeaponLevel;\n\t\t}\n\t\tif (oldData.expLevel !== newData.expLevel) {\n\t\t\tkeys.push('expLevel');\n\t\t\tprevious.expLevel = oldData.expLevel;\n\t\t\tcurrent.expLevel = newData.expLevel;\n\t\t}\n\t\tif (oldData.trophies !== newData.trophies) {\n\t\t\tkeys.push('trophies');\n\t\t\tprevious.trophies = oldData.trophies;\n\t\t\tcurrent.trophies = newData.trophies;\n\t\t}\n\t\tif (oldData.bestTrophies !== newData.bestTrophies) {\n\t\t\tkeys.push('bestTrophies');\n\t\t\tprevious.bestTrophies = oldData.bestTrophies;\n\t\t\tcurrent.bestTrophies = newData.bestTrophies;\n\t\t}\n\t\tif (oldData.warStars !== newData.warStars) {\n\t\t\tkeys.push('warStars');\n\t\t\tprevious.warStars = oldData.warStars;\n\t\t\tcurrent.warStars = newData.warStars;\n\t\t}\n\t\tif (oldData.attackWins !== newData.attackWins) {\n\t\t\tkeys.push('attackWins');\n\t\t\tprevious.attackWins = oldData.attackWins;\n\t\t\tcurrent.attackWins = newData.attackWins;\n\t\t}\n\t\tif (oldData.defenseWins !== newData.defenseWins) {\n\t\t\tkeys.push('defenseWins');\n\t\t\tprevious.defenseWins = oldData.defenseWins;\n\t\t\tcurrent.defenseWins = newData.defenseWins;\n\t\t}\n\t\tif ((oldData.builderHallLevel || newData.builderHallLevel) && (oldData.builderHallLevel !== newData.builderHallLevel)) {\n\t\t\tkeys.push('builderHallLevel');\n\t\t\tprevious.builderHallLevel = oldData.builderHallLevel || null;\n\t\t\tcurrent.builderHallLevel = newData.builderHallLevel;\n\t\t}\n\t\tif ((oldData.versusTrophies || newData.versusTrophies) && (oldData.versusTrophies !== newData.versusTrophies)) {\n\t\t\tkeys.push('versusTrophies');\n\t\t\tprevious.versusTrophies = oldData.versusTrophies || null;\n\t\t\tcurrent.versusTrophies = newData.versusTrophies;\n\t\t}\n\t\tif ((oldData.bestVersusTrophies || newData.bestVersusTrophies) && (oldData.bestVersusTrophies !== newData.bestVersusTrophies)) {\n\t\t\tkeys.push('bestVersusTrophies');\n\t\t\tprevious.bestVersusTrophies = oldData.bestVersusTrophies || null;\n\t\t\tcurrent.bestVersusTrophies = newData.bestVersusTrophies;\n\t\t}\n\t\tif ((oldData.versusBattleWins || newData.versusBattleWins) && (oldData.versusBattleWins !== newData.versusBattleWins)) {\n\t\t\tkeys.push('versusBattleWins');\n\t\t\tprevious.versusBattleWins = oldData.versusBattleWins || null;\n\t\t\tcurrent.versusBattleWins = newData.versusBattleWins;\n\t\t}\n\t\tif ((oldData.role || newData.role) && (oldData.role !== newData.role)) {\n\t\t\tkeys.push('role');\n\t\t\tprevious.role = oldData.role || null;\n\t\t\tcurrent.role = newData.role;\n\t\t}\n\t\tif (oldData.donations !== newData.donations) {\n\t\t\tkeys.push('donations');\n\t\t\tprevious.donations = oldData.donations;\n\t\t\tcurrent.donations = newData.donations;\n\t\t}\n\t\tif (oldData.donationsReceived !== newData.donationsReceived) {\n\t\t\tkeys.push('donationsReceived');\n\t\t\tprevious.donationsReceived = oldData.donationsReceived;\n\t\t\tcurrent.donationsReceived = newData.donationsReceived;\n\t\t}\n\t\tif (oldData.league !== newData.league) {\n\t\t\tkeys.push('league');\n\t\t\tprevious.league = oldData.league;\n\t\t\tcurrent.league = newData.league;\n\t\t}\n\n\t\tconst oldLabels = oldData.labels.map(lb => lb.id).sort();\n\t\tconst newLabels = newData.labels.map(lb => lb.id).sort();\n\t\tif (newLabels !== oldLabels) {\n\t\t\tkeys.push('labels');\n\t\t\tprevious.labels = oldData.labels;\n\t\t\tcurrent.labels = newData.labels;\n\t\t}\n\n\t\t// Add essentital information to the response if there is any information updated...\n\t\tif (keys.length) {\n\t\t\tprevious.tag = oldData.tag;\n\t\t\tcurrent.tag = newData.tag;\n\n\t\t\tif (!keys.includes('name')) {\n\t\t\t\tprevious.name = oldData.name;\n\t\t\t\tcurrent.name = newData.name;\n\t\t\t}\n\n\t\t\tclient.emit('playerUpdate', { keys, previous, current });\n\t\t}\n\t}\n\n\t// Achievement updates related event\n\tif (client.events.includes('PLAYER_ACHIEVEMENT_UPDATE')) {\n\t\tconst achievements = [];\n\t\tfor (const ach of newData.achievements) {\n\t\t\tconst oldAch = oldData.achievements?.find(ac => ac.name === ach.name);\n\t\t\tconst oldValue = oldAch ? oldAch.value : null;\n\t\t\tif (oldValue !== ach.value) achievements.push({ name: ach.name, previous: oldAch, current: ach });\n\t\t}\n\t\tif (achievements.length) client.emit('playerAchievementUpdate', achievements);\n\t}\n\n\t// Player Troop update realted event\n\tif (client.events.includes('PLAYER_TROOP_UPDATE')) {\n\t\tconst heroes = [];\n\t\tfor (const hero of newData.heroes) {\n\t\t\tconst oldHero = oldData.heroes.find(he => he.name === hero.name);\n\t\t\tconst oldLvl = oldHero ? oldHero.level : null;\n\t\t\tif (oldLvl !== hero.level) heroes.push({ name: hero.name, oldLevel: oldLvl, newLevel: hero.level, maxLevel: hero.maxLevel, village: hero.village });\n\t\t}\n\n\t\tconst spells = [];\n\t\tfor (const spell of newData.spells) {\n\t\t\tconst oldSpell = oldData.spells.find(sp => sp.name === spell.name);\n\t\t\tconst oldLvl = oldSpell ? oldSpell.level : null;\n\t\t\tif (oldLvl !== spell.level) spells.push({ name: spell.name, oldLevel: oldLvl, newLevel: spell.level, maxLevel: spell.maxLevel, village: spell.village });\n\t\t}\n\n\t\tconst troops = [];\n\t\tfor (const troop of newData.troops) {\n\t\t\tconst oldTroop = oldData.troops.find(sp => sp.name === troop.name);\n\t\t\tconst oldLvl = oldTroop ? oldTroop.level : null;\n\t\t\tif (oldLvl !== troop.level) troops.push({ name: troop.name, oldLevel: oldLvl, newLevel: troop.level, maxLevel: troop.maxLevel, village: troop.village });\n\t\t}\n\n\t\tconst output: dynamicObj = {};\n\t\tconst keys = [];\n\n\t\tif (heroes.length) {\n\t\t\tkeys.push('heroes');\n\t\t\toutput.heroes = heroes;\n\t\t}\n\t\tif (spells.length) {\n\t\t\tkeys.push('spells');\n\t\t\toutput.spells = spells;\n\t\t}\n\t\tif (troops.length) {\n\t\t\tkeys.push('troops');\n\t\t\toutput.troops = troops;\n\t\t}\n\t\tif (keys.length) client.emit('playerTroopUpdate', output);\n\t}\n\n}\n\nexport function handleClanChanges(client: Tracker, oldData: Clan, newData: Clan) {\n\tif (client.events.includes('CLAN_UPDATE')) {\n\t\tconst keys = [];\n\t\tconst previous: dynamicObj = {};\n\t\tconst current: dynamicObj = {};\n\n\t\tif (oldData.name !== newData.name) {\n\t\t\tkeys.push('name');\n\t\t\tprevious.name = oldData.name;\n\t\t\tcurrent.name = newData.name;\n\t\t}\n\n\t\tif (oldData.description !== newData.description) {\n\t\t\tkeys.push('description');\n\t\t\tprevious.description = oldData.description;\n\t\t\tcurrent.description = newData.description;\n\t\t}\n\n\t\tif (oldData.type !== newData.type) {\n\t\t\tkeys.push('type');\n\t\t\tprevious.type = oldData.type;\n\t\t\tcurrent.type = newData.type;\n\t\t}\n\n\t\tif (oldData.location.name !== newData.location.name) {\n\t\t\tkeys.push('location');\n\t\t\tprevious.location = oldData.location;\n\t\t\tcurrent.location = newData.location;\n\t\t}\n\n\t\tif (oldData.badgeUrls.large !== newData.badgeUrls.large) {\n\t\t\tkeys.push('badgeUrls');\n\t\t\tprevious.badgeUrls = oldData.badgeUrls;\n\t\t\tcurrent.badgeUrls = newData.badgeUrls;\n\t\t}\n\n\t\tif (oldData.clanLevel !== newData.clanLevel) {\n\t\t\tkeys.push('clanLevel');\n\t\t\tprevious.clanLevel = oldData.clanLevel;\n\t\t\tcurrent.clanLevel = newData.clanLevel;\n\t\t}\n\n\t\tif (oldData.clanPoints !== newData.clanPoints) {\n\t\t\tkeys.push('clanPoints');\n\t\t\tprevious.clanPoints = oldData.clanPoints;\n\t\t\tcurrent.clanPoints = newData.clanPoints;\n\t\t}\n\n\t\tif (oldData.clanVersusPoints !== newData.clanVersusPoints) {\n\t\t\tkeys.push('clanVersusPoints');\n\t\t\tprevious.clanVersusPoints = oldData.clanVersusPoints;\n\t\t\tcurrent.clanVersusPoints = newData.clanVersusPoints;\n\t\t}\n\n\t\tif (oldData.requiredTrophies !== newData.requiredTrophies) {\n\t\t\tkeys.push('requiredTrophies');\n\t\t\tprevious.requiredTrophies = oldData.requiredTrophies;\n\t\t\tcurrent.requiredTrophies = newData.requiredTrophies;\n\t\t}\n\n\t\tif (oldData.warFrequency !== newData.warFrequency) {\n\t\t\tkeys.push('warFrequency');\n\t\t\tprevious.warFrequency = oldData.warFrequency;\n\t\t\tcurrent.warFrequency = newData.warFrequency;\n\t\t}\n\n\t\tif (oldData.warWinStreak !== newData.warWinStreak) {\n\t\t\tkeys.push('warWinStreak');\n\t\t\tprevious.warWinStreak = oldData.warWinStreak;\n\t\t\tcurrent.warWinStreak = newData.warWinStreak;\n\t\t}\n\n\t\tif (oldData.warWins !== newData.warWins) {\n\t\t\tkeys.push('warWins');\n\t\t\tprevious.warWins = oldData.warWins;\n\t\t\tcurrent.warWins = newData.warWins;\n\t\t}\n\n\t\tif (oldData.warTies !== newData.warTies) {\n\t\t\tkeys.push('warTies');\n\t\t\tprevious.warTies = oldData.warTies || null;\n\t\t\tcurrent.warTies = newData.warTies || null;\n\t\t}\n\n\t\tif (oldData.warLosses !== newData.warLosses) {\n\t\t\tkeys.push('warLosses');\n\t\t\tprevious.warLosses = oldData.warLosses || null;\n\t\t\tcurrent.warLosses = newData.warLosses || null;\n\t\t}\n\n\t\tif (oldData.isWarLogPublic !== newData.isWarLogPublic) {\n\t\t\tkeys.push('isWarLogPublic');\n\t\t\tprevious.isWarLogPublic = oldData.isWarLogPublic;\n\t\t\tcurrent.isWarLogPublic = newData.isWarLogPublic;\n\t\t}\n\n\t\tif ((oldData.warLeague || newData.warLeague) && (oldData.warLeague?.id !== newData.warLeague?.id)) {\n\t\t\tkeys.push('warLeague');\n\t\t\tprevious.warLeague = oldData.warLeague;\n\t\t\tcurrent.warLeague = newData.warLeague;\n\t\t}\n\n\t\tif (oldData.members !== newData.members) {\n\t\t\tkeys.push('members');\n\t\t\tprevious.members = oldData.members;\n\t\t\tcurrent.members = newData.members;\n\t\t}\n\n\t\tconst oldLabels = oldData.labels.map(lb => lb.id).sort();\n\t\tconst newLabels = newData.labels.map(lb => lb.id).sort();\n\t\tif (newLabels !== oldLabels) {\n\t\t\tkeys.push('labels');\n\t\t\tprevious.labels = oldData.labels;\n\t\t\tcurrent.labels = newData.labels;\n\t\t}\n\n\t\tif (keys.length) {\n\t\t\tprevious.tag = oldData.tag;\n\t\t\tcurrent.tag = newData.tag;\n\n\t\t\tif (!keys.includes('name')) {\n\t\t\t\tprevious.name = oldData.name;\n\t\t\t\tcurrent.name = newData.name;\n\t\t\t}\n\n\t\t\tclient.emit('clanUpdate', { keys, previous, current });\n\t\t}\n\t}\n}\n\ninterface dynamicObj {\n\t[key: string]: any;\n}\n"]}